# Development Guide

This guide is for contributors who want to understand the project structure and develop the plugin locally.

## Project Structure

### Source Structure

```
src/
├── components/
│   ├── Mermaid.vue           # Diagram rendering component (Vue SFC)
│   ├── MermaidPreview.vue    # Fullscreen preview component (Vue SFC)
│   ├── useMermaidPreview.ts  # Internal state management
│   └── Layout.vue            # Layout component with preview slot
├── index.ts                  # Main entry, exports public features
├── theme.ts                  # Theme configuration, one-click integration
└── mermaid-markdown.ts       # markdown-it plugin
```

### Build Output

The build uses Vite with library mode:

```
dist/
├── index.js      # Bundled ESM output (includes all components and logic)
└── index.d.ts    # Type declarations (generated by vue-tsc)
```

All components and logic are bundled into a single ESM file with external dependencies (vitepress, mermaid, vue).

### Exports

All public APIs are exported from the main entry point `@unify-js/vitepress-plugin-mermaid`:

```typescript
// Default export: theme configuration
import mermaidPluginTheme from '@unify-js/vitepress-plugin-mermaid';

// Named exports
import {
  mermaidMarkdownPlugin, // Markdown-it plugin
  Mermaid, // Diagram component
  MermaidPreview, // Preview modal component
} from '@unify-js/vitepress-plugin-mermaid';
```

## Local Development

### Setup

```bash
# Navigate to plugin directory
cd packages/vitepress-plugin-mermaid-preview

# Install dependencies
pnpm install

# Development mode (watch file changes)
pnpm dev

# Build
pnpm build
```

### Debugging in Documentation Site

```bash
pnpm docs:dev
```

## Code Standards

- Write code using TypeScript
- Components use `<script setup>` syntax
- Styles use scoped CSS
- Use named exports, default export is theme configuration
